schema: '2.0'
stages:
  preprocess:
    cmd: python scripts/preprocess.py
    deps:
    - path: data/raw/creditcard-data.csv
      hash: md5
      md5: e90efcb83d69faf99fcab8b0255024de
      size: 150828752
    - path: scripts/preprocess.py
      hash: md5
      md5: 9a459d581dad191b0306bc307cb9d43e
      size: 5618
    outs:
    - path: data/processed/test.csv
      hash: md5
      md5: 6808d05d99bf846e52c204e2c79e149e
      size: 16989365
    - path: data/processed/train.csv
      hash: md5
      md5: ec01a801490e734a38d9a5b4f83281d2
      size: 2194189
    - path: data/processed/val.csv
      hash: md5
      md5: 0dc0e2240c0d38c2c9b2f13030ae8858
      size: 33639065
  train:
    cmd: python scripts/train.py
    deps:
    - path: data/processed/train.csv
      hash: md5
      md5: ec01a801490e734a38d9a5b4f83281d2
      size: 2194189
    - path: scripts/train.py
      hash: md5
      md5: 1020cbeef60af11651cbbebe0fa98b01
      size: 5447
    params:
      params.yaml:
        train.random_state: 42
        train.test_size: 0.2
    outs:
    - path: models/model.joblib
      hash: md5
      md5: c9e31bf8eb79366156498bbc39e62ff4
      size: 312709
  validate:
    cmd: python scripts/validate.py --model-version Staging --data-rev workspace
    deps:
    - path: data/processed/test.csv
      hash: md5
      md5: 6808d05d99bf846e52c204e2c79e149e
      size: 16989365
    - path: models/model.joblib
      hash: md5
      md5: c9e31bf8eb79366156498bbc39e62ff4
      size: 312709
    - path: scripts/validate.py
      hash: md5
      md5: eaade42a142ead51cc53fe45e66a7a3d
      size: 6288
    outs:
    - path: models/validation/confusion_matrix.png
      hash: md5
      md5: 765fe7c79b00afc5924143f53d8b53b0
      size: 7477
    - path: models/validation/roc_curve.png
      hash: md5
      md5: 46be5be1510773795306a1e039f61854
      size: 16196
  generate_data:
    cmd: python scripts/setup.py
    deps:
    - path: scripts/setup.py
      hash: md5
      md5: 51c2502b117ec0f2bbe7a3c4df72fe23
      size: 3863
    outs:
    - path: data/raw/creditcard-data.csv
      hash: md5
      md5: e90efcb83d69faf99fcab8b0255024de
      size: 150828752
